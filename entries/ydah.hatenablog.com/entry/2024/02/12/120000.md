---
Title: irb の補完ダイアログの配色テーマを作成する
Date: 2024-02-12T12:00:00+09:00
URL: https://ydah.hatenablog.com/entry/2024/02/12/120000
EditURL: https://blog.hatena.ne.jp/ydah/ydah.hatenablog.com/atom/entry/6802418398314912369
---

[ruby/reline](https://github.com/ruby/reline)が[v0.4.0](https://github.com/ruby/reline/releases/tag/v0.4.0)から、irb の補完ダイアログの配色をカスタマイズできるようになったので、テーマを作成してみました。

- <https://github.com/ydah/irb-theme-iceberg>

デフォルトは以下のような配色です。

<figure class="figure-image figure-image-fotolife" title="デフォルトの配色">[f:id:ydah:20241227015515p:plain]<figcaption>デフォルトの配色</figcaption></figure>

そこで、以下のように`~/irbrc`に色の設定を書くことで補完ダイアログの色を変更できます。

```ruby
Reline::Face.config(:completion_dialog) do |conf|
  conf.define :default, foreground: :white, background: :red
  conf.define :enhanced, foreground: :white, background: :green
  conf.define :scrollbar, foreground: :white, background: :red
end
```

この設定をした上で irb を起動すると、以下のように補完ダイアログの色が変更されています。

<figure class="figure-image figure-image-fotolife" title="変更後の配色（スイカみたいで可愛い）">[f:id:ydah:20241227015538p:plain]<figcaption>変更後の配色（スイカみたいで可愛い）</figcaption></figure>

このように、`Reline::Face.config`を使って補完ダイアログの色を変更できます。

私は、[Iceberg](https://cocopon.github.io/iceberg.vim/)というカラースキームが好みで使っています。
目に優しいダークブルーの落ち着いた配色で、コントラストも落とされているので長時間の作業にも適していると感じています。
irbの補完ダイアログの色もIcebergに合わせたいと思って、カラースキーマを作成してgemとして公開しました。

irb の補完ダイアログのテーマをgemとして公開するのは@katsyoshiさんが[dracula](https://draculatheme.com/)風のテーマをgemとしてリリースされていたので、参考にして作成しました。

- [irb の補完の色がいじれるようになったのでかっこよくしてみた | katsyoshi のめもみたいなの](https://blog.katsyoshi.org/blog/2023/11/08/makeup-your-irb-suggestions/)


[https://github.com/katsyoshi/irb-theme-dracula:embed:cite]


作成したIceberg風のテーマは以下で公開しています。(再掲)


[https://github.com/ydah/irb-theme-iceberg:embed:cite]


適用すると以下のような配色になります。

<figure class="figure-image figure-image-fotolife" title="Iceberg">[f:id:ydah:20241227015610p:plain]<figcaption>Iceberg</figcaption></figure>

使い方は以下の通りです。

１. `irb-theme-iceberg`のインストール

```sh
gem install irb-theme-iceberg
```

２. `~/.irbrc`に以下を追記

```ruby
require 'irb/theme/iceberg'
```

以上で、irb の補完ダイアログの配色をIceberg風に変更できます。
尚、使用するにはもちろん`reline`のバージョンが`v0.4.0`以上である必要があるので、必要に応じてインストールしておく必要があります。

```sh
gem install reline
```

気になっていた機能なので使ってみたのですが、普段使っているものをカスタマイズできるのは楽しくて良いですね。
手軽にカスタマイズできるので、自分好みの配色にしてみるのも良いかもしれません。
