---
Title: 'オートマトンと言語理論 学習記 #1: オートマトンとは何か'
Date: 2025-04-24T23:00:00+09:00
URL: https://ydah.hatenablog.com/entry/2025/04/24/230000
EditURL: https://blog.hatena.ne.jp/ydah/ydah.hatenablog.com/atom/entry/6802418398376781964
---

## はじめに

オートマトンと言語理論について表面的な理解にとどまっていたため、基礎から再度学習を始めることにしました。
この機会に、単に学習するだけでなく、学んだ内容を体系的にまとめていきたいと思います。

同じように学習している方や、これから学習しようと考えている方の参考になれば幸いです。参考文献を各回に記載していますので、興味がある方はそちらも参照してください。

## 参考文献

* 藤原暁宏. はじめて学ぶオートマトンと言語理論. 東京: 森北出版, 2015, 192p

[https://www.morikita.co.jp/books/mid/085291:embed:cite]


## 概要

今回は初回なので、オートマトンとはそもそも何か、ということを学びます。

コンピュータがCPUやメモリによって構成されていることを知っている人は多いと思います。
では、コンピュータの基本的な動作原理はどのようなものであるかご存知でしょうか。

コンピュータが実行する「計算」とその仕組み、そしてその計算を実行するためのオートマトンと呼ばれる概念を学びます。

## 計算とはなにか

計算とは数値に対する演算を行うことを指します。
例えば、計算とは何かと聞くと、多くは電卓で行う四則演算を思い浮かべるでしょう。

しかし、これらの数値に対する演算はコンピュータが実行する「計算」の一部に過ぎない。
例えば、数値計算以外の基本的な計算の一つとして挙げられるのは、文字入力における仮名漢字変換です。

コンピュータ上でのローマ字入力における仮名漢字変換は以下のように行われます。

ashitanoashitahaasatte

→あしたのあしたはあさって
→明日の明日は明後日

このように、コンピュータは数値計算だけでなく、仮名漢字変換もコンピュータがおこなっている「計算」である。

コンピュータの計算の特徴は

* 入力されたデータを保存している
* 保存されたデータとそれに対する入力に対して次のデータを決める表がある

例えば、数値計算であれば以下のように受け取った入力を計算しながらデータを保存していきます。

<figure class="figure-image figure-image-fotolife" title="電卓における数値計算の図">[f:id:ydah:20250424231613p:plain]<figcaption>電卓における数値計算の図</figcaption></figure>

また、これらの計算を行うときにはコンピュータはそれぞれの演算について表をもっている。この表は縦軸がデータを表しており、横軸がそのデータに対する入力を表している。
そして、縦軸と横軸の交点にある値が次のデータを表している。

| × | 0 | 1 | 2 | 3 | 4 | 5 | 6 |
|---|---|---|---|---|---|---|---|
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 1 | 2 | 3 | 4 | 5 | 6 |
| 2 | 0 | 2 | 4 | 6 | 8 | 10 | 12 |
| 3 | 0 | 3 | 6 | 9 | 12 | 15 | 18 |
| 4 | 0 | 4 | 8 | 12 | 16 | 20 | 24 |
| 5 | 0 | 5 | 10 | 15 | 20 | 25 | 30 |
| 6 | 0 | 6 | 12 | 18 | 24 | 30 | 36 |

2 × 3 = 6

の例で説明すると、2というデータが与えられているときに、`× 3`という入力が与えられると、コンピュータは表の縦軸が2、横軸が3の交点にあるカラムを参照して、次のデータを6と決定します。
このように、コンピュータは入力されたデータを保存し、保存されたデータとそれに対する入力に対して次のデータを決める表をもっています。

つまり、コンピュータが行なっている「計算」は、 **保存されているデータをそのデータと与えられた入力に応じて書き換える操作** といえます。

## オートマトンとはなにか

オートマトンとはコンピュータの特徴を単純化かつ抽象化した数学的モデルです。
先の「計算とはなにか」という章で説明したように、コンピュータにおける「計算」の特徴とは「データを保存していること」、「保存されたデータとそれに対する入力に対して次のデータを決める表があること」です。

オートマトンではこの2つの特徴を「入力」、「出力」、「状態」という3つの要素を用いて表現します。
概念図は以下のようになります。

<figure class="figure-image figure-image-fotolife" title="オートマトンの概念図">[f:id:ydah:20250424231733p:plain]<figcaption>オートマトンの概念図</figcaption></figure>

では生活の中でオートマトンとしてモデル化できる例を用いて、オートマトンを説明していきましょう。

### 例: 自動販売機

オートマトンの例としてよく用いられるのは自動販売機です。
以下のような特徴を持つ単純な自動販売機を考えます。

* 自動販売機は100円のジュースを1種類のみ販売する
* 自動販売機は100円玉のみ受け付ける
* 100円がすでに投入されている状況で、さらに100円玉が投入された場合は100円が返却される

この自動販売機に対する一般的な入力と出力は以下の通りとなります。

* 入力: 100円を入れる、ボタンを押す
* 出力: ジュースが出る、100円玉が返却される

この自動販売機に対する入力と出力をいくつか考えてみましょう。

| 入力 | 出力 |
|---|---|
| 100円を入れる | 何もでてこない |
| ボタンを押す | 何もでてこない |
| 100円を入れる、ボタンを押す | ジュースが出る |
| ボタンを押して、100円を入れる | 何もでてこない |
| 100円を入れる、100円を入れる | 100円玉が返却される |

上記の入力例から分かるように、この自動販売機は「100円を入れる」、「ボタンを押す」という入力をこの順番で受け取ると、「ジュースが出る」という出力があります。
しかし、同じ入力を逆の順番で行っても、何も出力されないことが分かります。
つまり、それまでの入力によって自動販売機の状態が変化して、それによって「ボタンを押す」という入力をした場合の出力が異なります。

では、この自動販売機をオートマトンとして図示すると以下のようになります。

<figure class="figure-image figure-image-fotolife" title="自動販売機の動作を示すオートマトンの図">[f:id:ydah:20250424231815p:plain]<figcaption>自動販売機の動作を示すオートマトンの図</figcaption></figure>

このオートマトンは以下の二つの状態を持ちます。

* 状態1: 初期状態（何も入っていない状態）
* 状態2: 100円が入っている状態

それぞれの状態に対して、入力に対応した出力と状態の変化をまとめると以下の通りです。

| 状態 | 入力 | 出力 | 次の状態 |
|---|---|---|---|
| 状態1 | 100円を入れる | 何もでてこない | 状態2 |
| 状態1 | ボタンを押す | 何もでてこない | 状態1 |
| 状態2 | 100円を入れる | 100円玉が返却される | 状態2 |
| 状態2 | ボタンを押す | ジュースが出る | 状態1 |

## オートマトンの数学的定義

オートマトンは「入力」、「出力」、「状態」をもつ数学的モデルの総称であり、能力や特徴によっていくつもの種類のオートマトンが存在します。
ここでは、オートマトンの中でも最も基本的なモデルである **順序機械(sequential machine)** を用いて説明します。

順序機械とは、入力に応じて状態が変化し、その状態変化に伴って出力が決まるという、シーケンシャル（順序的）な計算モデルです。
固定された有限個の状態と、明確に定義された状態遷移ルールによって、決定論的な振る舞いをする系をモデル化するのに適しています。

入力列を出力列に変換するので、トランスデューサー（Transducer）とも呼ばれる部類に属します。
トランスデューサーとは、入力列を受け取り、それを出力列に変換する計算モデルの総称です。

順序機械のオートマトンは、以下のように定義されます。

順序機械ではオートマトンの3つの構成要素である、「入力」、「出力」、「状態」をそれぞれ集合として以下のように定義します。

* 入力: Σ（シグマ）
* 出力: Δ（デルタ）
* 状態: Q

また、状態集合のQに含まれる状態の一つは、順序機械の最初の状態を表す特別な状態であり、この状態を **初期状態** と呼びます。
例えば、先ほどの自動販売機の例では、 q0、 q1 がそれぞれ、「初期状態」、「100円が入っている状態」を表す状態を表します。
その場合には

```
Q = {q0, q1}, Σ = {100円を入れる, ボタンを押す}, Δ = {ジュースが出る, 100円玉が返却される}
```

となります。

続いて状態と入力に対して、次の状態と出力を決める関数について説明します。
オートマトンの一種である順序機械は、入力が与えられることによって別の状態に変化し、状態の変化に伴って出力を行います。

この入力による状態の変化を **状態遷移** と呼びます。また、状態変異とそれに伴う出力を定める関数のことを **状態遷移関数** と呼びます。

状態遷移関数は以下のように定義されます。

順序機械の状態遷移関数δは、状態 p ∈ Q と入力 x ∈ Σ に対して、次の状態 q ∈ Q と出力 y ∈ Δ を決定する関数です。
以下の通り表されます。
  δ(p, x) = (q, y)

自動販売機の例で考えると、状態遷移関数は以下のようになります。

```
δ(q0, ボタンを押す) = (q0, 何もでてこない)
δ(q0, 100円を入れる) = (q1, 何もでてこない)
δ(q1, ボタンを押す) = (q0, ジュースが出る)
δ(q1, 100円を入れる) = (q1, 100円玉が返却される)
```

最後に、これらの要素や集合をまとめて順序機械として定義します。順序機械は「状態集合」、「入力集合」、「出力集合」、「初期状態」、「状態遷移関数」の5つの要素から構成される計算の動作を表すモデルであり、以下のように定義されます。

```
順序機械 M は、3つの集合 Q, Σ, Δ と、関数 δ および、特別な状態 q0 ∈ Q を指定することにより定まる
計算のモデルであり、以下のように表される。

M = (Q, Σ, Δ, δ, q0)

また、各要素は以下の通りである。
* Q: 状態集合
* Σ: 入力記号集合
* Δ: 出力記号集合
* δ: 状態遷移関数
* q0: 初期状態
```

これを自動販売機の例に当てはめると、以下のようになります。

```
Q = {q0, q1},
Σ = {100円を入れる, ボタンを押す}, 
Δ = {ジュースが出る, 100円玉が返却される}, 
δ(q0, ボタンを押す) = (q0, 何もでてこない),
δ(q0, 100円を入れる) = (q1, 何もでてこない), 
δ(q1, ボタンを押す) = (q0, ジュースが出る), 
δ(q1, 100円を入れる) = (q1, 100円玉が返却される)
```

また、この状態機会を図を用いて表すと以下のようになります。この図では各状態を円で表していて、各状態遷移関数を矢印で表しています。そして、各状態遷移に対する入力と出力は「入力/出力」という形式で各矢印のラベルとして表しています。
なお、状態 q0 を表す円の上にある太い矢印は q0 が初期状態であることを表しています。

<figure class="figure-image figure-image-fotolife" title="自動販売機の動作を示す順序機械の図">[f:id:ydah:20250424231921p:plain]<figcaption>自動販売機の動作を示す順序機械の図</figcaption></figure>

補足ですが、この定義はミーリー型と呼ばれる順序機械に該当します。他にはムーア型と呼ばれる順序機械もあります。
ミーリー型は出力が入力と状態に依存しますが、ムーア型は出力が現状態のみの関数であるため、出力が状態に依存します。

<figure class="figure-image figure-image-fotolife" title="ミーリー型とムーア型の状態遷移図">[f:id:ydah:20250424232005p:plain]<figcaption>ミーリー型とムーア型の状態遷移図</figcaption></figure>

さて、これでオートマトンの基本的な定義と、オートマトンの一種である順序機械について説明しました。

## まとめと次回予告

今回の内容の要点は以下の通りです。

* オートマトンはコンピュータの特徴を単純化・抽象化した数学的モデルである
* 計算とは保存されているデータをそのデータと与えられた入力に応じて書き換える操作である
* オートマトンは「入力」「出力」「状態」の3つの要素で構成される
* 順序機械はオートマトンの基本的なモデルの一つで、入力列を出力列に変換するトランスデューサーに分類される
* 順序機械は5つの要素（状態集合Q、入力記号集合Σ、出力記号集合Δ、状態遷移関数δ、初期状態q0）で定義される
* 状態遷移関数は現在の状態と入力に基づいて次の状態と出力を決定する

次回は、オートマトンの一種である **有限オートマトン** について学びます。
その前に、集合と関数について復習する記事を挟むかもしれませんが、ひとまず今回はここまでにします。

オートマトンと言語理論について学習している方や、これから学習しようと考えている方はぜひ一緒に学んでいきましょう。
この学習記は、オートマトンと言語理論の基礎を学ぶためのものですので、内容に誤りや不明点があればぜひコメントで教えてください。
